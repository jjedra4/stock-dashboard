[33m[W 2025-12-05 21:43:39,588][0m Trial 0 failed with parameters: {'n_estimators': 253, 'max_depth': 7, 'learning_rate': 0.22066779006518933, 'subsample': 0.642977882632862, 'colsample_bytree': 0.5983115446608921, 'reg_alpha': 3.7726882021700856, 'reg_lambda': 1.7600918362288465} because of the following error: KeyError('adjClose').[0m
Traceback (most recent call last):
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py"[0m, line [35m3812[0m, in [35mget_loc[0m
    return [31mself._engine.get_loc[0m[1;31m(casted_key)[0m
           [31m~~~~~~~~~~~~~~~~~~~~[0m[1;31m^^^^^^^^^^^^[0m
  File [35m"pandas/_libs/index.pyx"[0m, line [35m167[0m, in [35mpandas._libs.index.IndexEngine.get_loc[0m
  File [35m"pandas/_libs/index.pyx"[0m, line [35m196[0m, in [35mpandas._libs.index.IndexEngine.get_loc[0m
  File [35m"pandas/_libs/hashtable_class_helper.pxi"[0m, line [35m7088[0m, in [35mpandas._libs.hashtable.PyObjectHashTable.get_item[0m
  File [35m"pandas/_libs/hashtable_class_helper.pxi"[0m, line [35m7096[0m, in [35mpandas._libs.hashtable.PyObjectHashTable.get_item[0m
[1;35mKeyError[0m: [35m'adjClose'[0m

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py"[0m, line [35m205[0m, in [35m_run_trial[0m
    value_or_values = func(trial)
  File [35m"/Users/brader/Desktop/stock-dashboard/src/model/tuning.py"[0m, line [35m63[0m, in [35mobjective[0m
    [31mmodel.train[0m[1;31m(X_train)[0m
    [31m~~~~~~~~~~~[0m[1;31m^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py"[0m, line [35m15[0m, in [35mtrain[0m
    dtrain = self._prepare_data(X_train, train=True)
  File [35m"/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py"[0m, line [35m117[0m, in [35m_prepare_data[0m
    y = self._calculate_target(df_clean)
  File [35m"/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py"[0m, line [35m123[0m, in [35m_calculate_target[0m
    return np.log([31mX[0m[1;31m['adjClose'][0m / X['adjClose'].shift(1))
                  [31m~[0m[1;31m^^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/frame.py"[0m, line [35m4113[0m, in [35m__getitem__[0m
    indexer = self.columns.get_loc(key)
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py"[0m, line [35m3819[0m, in [35mget_loc[0m
    raise KeyError(key) from err
[1;35mKeyError[0m: [35m'adjClose'[0m
[33m[W 2025-12-05 21:43:39,593][0m Trial 0 failed with value None.[0m
Traceback (most recent call last):
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'adjClose'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/Users/brader/Desktop/stock-dashboard/src/model/tuning.py", line 104, in <module>
    best_params = tuner.run()
  File "/Users/brader/Desktop/stock-dashboard/src/model/tuning.py", line 90, in run
    study.optimize(self.objective, n_trials=self.n_trials)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/study.py", line 490, in optimize
    _optimize(
    ~~~~~~~~~^
        study=self,
        ^^^^^^^^^^^
    ...<7 lines>...
        show_progress_bar=show_progress_bar,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 67, in _optimize
    _optimize_sequential(
    ~~~~~~~~~~~~~~~~~~~~^
        study,
        ^^^^^^
    ...<8 lines>...
        progress_bar=progress_bar,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 164, in _optimize_sequential
    frozen_trial_id = _run_trial(study, func, catch)
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 262, in _run_trial
    raise func_err
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 205, in _run_trial
    value_or_values = func(trial)
  File "/Users/brader/Desktop/stock-dashboard/src/model/tuning.py", line 63, in objective
    model.train(X_train)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py", line 15, in train
    dtrain = self._prepare_data(X_train, train=True)
  File "/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py", line 117, in _prepare_data
    y = self._calculate_target(df_clean)
  File "/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py", line 123, in _calculate_target
    return np.log(X['adjClose'] / X['adjClose'].shift(1))
                  ~^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/frame.py", line 4113, in __getitem__
    indexer = self.columns.get_loc(key)
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'adjClose'
