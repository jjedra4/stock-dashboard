[33m[W 2025-12-05 21:28:28,471][0m Trial 0 failed with parameters: {'n_estimators': 624, 'max_depth': 9, 'learning_rate': 0.049404052847041365, 'subsample': 0.8187589791367903, 'colsample_bytree': 0.9870685513360844, 'reg_alpha': 1.4235910160585974, 'reg_lambda': 0.052205063601902246} because of the following error: KeyError("None of [DatetimeIndex(['2022-01-24', '2022-01-25', '2022-01-26', '2022-01-27',\n               '2022-01-28', '2022-01-31', '2022-02-01', '2022-02-02',\n               '2022-02-03', '2022-02-04',\n               ...\n               '2022-09-14', '2022-09-15', '2022-09-16', '2022-09-19',\n               '2022-09-20', '2022-09-21', '2022-09-22', '2022-09-23',\n               '2022-09-26', '2022-09-27'],\n              dtype='datetime64[ns]', name='date', length=171, freq=None)] are in the [index]").[0m
Traceback (most recent call last):
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py"[0m, line [35m205[0m, in [35m_run_trial[0m
    value_or_values = func(trial)
  File [35m"/Users/brader/Desktop/stock-dashboard/src/model/tuning.py"[0m, line [35m65[0m, in [35mobjective[0m
    [31mmodel.train[0m[1;31m(X_train, y_train)[0m
    [31m~~~~~~~~~~~[0m[1;31m^^^^^^^^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py"[0m, line [35m12[0m, in [35mtrain[0m
    dtrain = self._prepare_data(X_train, y_train)
  File [35m"/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py"[0m, line [35m116[0m, in [35m_prepare_data[0m
    y_aligned = [31my.loc[0m[1;31m[df_clean.index][0m
                [31m~~~~~[0m[1;31m^^^^^^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py"[0m, line [35m1192[0m, in [35m__getitem__[0m
    return [31mself._getitem_axis[0m[1;31m(maybe_callable, axis=axis)[0m
           [31m~~~~~~~~~~~~~~~~~~[0m[1;31m^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py"[0m, line [35m1421[0m, in [35m_getitem_axis[0m
    return [31mself._getitem_iterable[0m[1;31m(key, axis=axis)[0m
           [31m~~~~~~~~~~~~~~~~~~~~~~[0m[1;31m^^^^^^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py"[0m, line [35m1361[0m, in [35m_getitem_iterable[0m
    keyarr, indexer = [31mself._get_listlike_indexer[0m[1;31m(key, axis)[0m
                      [31m~~~~~~~~~~~~~~~~~~~~~~~~~~[0m[1;31m^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py"[0m, line [35m1559[0m, in [35m_get_listlike_indexer[0m
    keyarr, indexer = [31max._get_indexer_strict[0m[1;31m(key, axis_name)[0m
                      [31m~~~~~~~~~~~~~~~~~~~~~~[0m[1;31m^^^^^^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py"[0m, line [35m6212[0m, in [35m_get_indexer_strict[0m
    [31mself._raise_if_missing[0m[1;31m(keyarr, indexer, axis_name)[0m
    [31m~~~~~~~~~~~~~~~~~~~~~~[0m[1;31m^^^^^^^^^^^^^^^^^^^^^^^^^^^^[0m
  File [35m"/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py"[0m, line [35m6261[0m, in [35m_raise_if_missing[0m
    raise KeyError(f"None of [{key}] are in the [{axis_name}]")
[1;35mKeyError[0m: [35m"None of [DatetimeIndex(['2022-01-24', '2022-01-25', '2022-01-26', '2022-01-27',\n               '2022-01-28', '2022-01-31', '2022-02-01', '2022-02-02',\n               '2022-02-03', '2022-02-04',\n               ...\n               '2022-09-14', '2022-09-15', '2022-09-16', '2022-09-19',\n               '2022-09-20', '2022-09-21', '2022-09-22', '2022-09-23',\n               '2022-09-26', '2022-09-27'],\n              dtype='datetime64[ns]', name='date', length=171, freq=None)] are in the [index]"[0m
[33m[W 2025-12-05 21:28:28,474][0m Trial 0 failed with value None.[0m
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/Users/brader/Desktop/stock-dashboard/src/model/tuning.py", line 104, in <module>
    best_params = tuner.run()
  File "/Users/brader/Desktop/stock-dashboard/src/model/tuning.py", line 90, in run
    study.optimize(self.objective, n_trials=self.n_trials)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/study.py", line 490, in optimize
    _optimize(
    ~~~~~~~~~^
        study=self,
        ^^^^^^^^^^^
    ...<7 lines>...
        show_progress_bar=show_progress_bar,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 67, in _optimize
    _optimize_sequential(
    ~~~~~~~~~~~~~~~~~~~~^
        study,
        ^^^^^^
    ...<8 lines>...
        progress_bar=progress_bar,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 164, in _optimize_sequential
    frozen_trial_id = _run_trial(study, func, catch)
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 262, in _run_trial
    raise func_err
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/optuna/study/_optimize.py", line 205, in _run_trial
    value_or_values = func(trial)
  File "/Users/brader/Desktop/stock-dashboard/src/model/tuning.py", line 65, in objective
    model.train(X_train, y_train)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py", line 12, in train
    dtrain = self._prepare_data(X_train, y_train)
  File "/Users/brader/Desktop/stock-dashboard/src/model/algorithms/xgboost_model.py", line 116, in _prepare_data
    y_aligned = y.loc[df_clean.index]
                ~~~~~^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py", line 1192, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py", line 1421, in _getitem_axis
    return self._getitem_iterable(key, axis=axis)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py", line 1361, in _getitem_iterable
    keyarr, indexer = self._get_listlike_indexer(key, axis)
                      ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexing.py", line 1559, in _get_listlike_indexer
    keyarr, indexer = ax._get_indexer_strict(key, axis_name)
                      ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py", line 6212, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/brader/Desktop/stock-dashboard/venv/lib/python3.13/site-packages/pandas/core/indexes/base.py", line 6261, in _raise_if_missing
    raise KeyError(f"None of [{key}] are in the [{axis_name}]")
KeyError: "None of [DatetimeIndex(['2022-01-24', '2022-01-25', '2022-01-26', '2022-01-27',\n               '2022-01-28', '2022-01-31', '2022-02-01', '2022-02-02',\n               '2022-02-03', '2022-02-04',\n               ...\n               '2022-09-14', '2022-09-15', '2022-09-16', '2022-09-19',\n               '2022-09-20', '2022-09-21', '2022-09-22', '2022-09-23',\n               '2022-09-26', '2022-09-27'],\n              dtype='datetime64[ns]', name='date', length=171, freq=None)] are in the [index]"
